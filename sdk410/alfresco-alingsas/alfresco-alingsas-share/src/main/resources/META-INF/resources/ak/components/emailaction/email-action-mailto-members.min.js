'use strict';(function(){YAHOO.Bubbling.fire("registerAction",{actionName:"onActionMultiEmailMembers",fn:function(b,c){c=[];var f="";if(Array.isArray(b))for(var a=0;a<b.length;a++)f=b[a].location.site.name,c[a]={nodeRef:b[a].nodeRef,fileName:b[a].fileName};else f=b.location.site.name,c=[{nodeRef:b.nodeRef,fileName:b.fileName}];var d="",g="";b=window.location.protocol+"//"+window.location.host;for(a=0;a<c.length;a++)0<d.length&&(d+=" \n",g+=", "),d+=c[a].fileName+" - "+Alfresco.util.combinePaths(b,
Alfresco.util.siteURL("document-details?nodeRef="+c[a].nodeRef)),g+=c[a].fileName;Alfresco.util.Ajax.jsonGet({url:Alfresco.constants.PROXY_URI+"alingsas/site/member-emails?siteName="+f,successCallback:{fn:function(e){e="mailto:"+encodeURIComponent(e.json.emails)+"?subject="+encodeURIComponent(g)+"&body="+encodeURIComponent(d);window.open(e)}},failureCallback:{fn:function(e){popup.hide();Alfresco.util.PopupManager.displayMessage({text:Alfresco.util.message("Failed to send email")})}}})}})})();
